<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cosmic Categories - Optimized Radial Encoding</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0a0a12 0%, #15151f 100%);
            color: #ffffff;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        
        #container {
            width: 100%;
            max-width: 900px;
            height: 90vh;
            position: relative;
        }
        
        .chart-title {
            font-size: 32px;
            font-weight: 900;
            fill: #ffffff;
            text-anchor: middle;
            letter-spacing: -0.5px;
        }
        
        .chart-subtitle {
            font-size: 14px;
            font-weight: 400;
            fill: #8899aa;
            text-anchor: middle;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        /* Distance rings */
        .distance-ring {
            fill: none;
            stroke: #2a3f5f;
            stroke-width: 1;
            opacity: 0.4;
        }
        
        .distance-ring-major {
            stroke: #3a5f8f;
            stroke-width: 2;
            opacity: 0.6;
        }
        
        .distance-label {
            font-size: 11px;
            fill: #6688aa;
            font-weight: 600;
            text-anchor: middle;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        /* Category sectors */
        .category-sector {
            opacity: 0.3;
            stroke: none;
        }
        
        .category-boundary {
            stroke: #ffffff;
            stroke-width: 2;
            stroke-dasharray: 5,5;
            opacity: 0.2;
            fill: none;
        }
        
        .category-label {
            font-size: 14px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 2px;
            text-anchor: middle;
        }
        
        /* Objects */
        .celestial-object {
            cursor: pointer;
            stroke: #ffffff;
            stroke-width: 2;
        }
        
        .celestial-object:hover {
            stroke-width: 4;
            filter: brightness(1.5);
        }
        
        .object-label {
            font-size: 11px;
            font-weight: 600;
            fill: #ffffff;
            text-anchor: middle;
        }
        
        /* Earth at center */
        .earth-center {
            fill: #ffffff;
            stroke: none;
        }
        
        .earth-label {
            font-size: 14px;
            font-weight: 700;
            fill: #ffffff;
            text-anchor: middle;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        /* Tooltip */
        .tooltip {
            position: fixed;
            background: rgba(10, 10, 20, 0.95);
            border: 2px solid;
            border-radius: 6px;
            padding: 10px;
            pointer-events: none;
            opacity: 0;
            backdrop-filter: blur(10px);
            font-size: 12px;
            min-width: 200px;
            z-index: 9999;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        
        .tooltip h3 {
            font-size: 14px;
            margin-bottom: 6px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .tooltip-stat {
            display: flex;
            justify-content: space-between;
            margin: 4px 0;
        }
        
        .tooltip-label {
            color: #6688aa;
            font-size: 10px;
            text-transform: uppercase;
        }
        
        .tooltip-value {
            font-weight: 600;
            color: #ffffff;
        }
        
        /* Legend */
        .legend-group {
            font-size: 12px;
        }
        
        .legend-title {
            font-size: 11px;
            font-weight: 700;
            fill: #6688aa;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .legend-item {
            cursor: pointer;
        }
        
        .legend-text {
            font-size: 12px;
            fill: #ffffff;
            font-weight: 500;
        }

    </style>
</head>
<body>
    <div id="container"></div>
    

    
    <script>
        // Data organized by category with proper angular sectors
        const categories = [
            {
                name: "STARS",
                color: "#FFD700",  // Gold
                startAngle: 72,
                endAngle: 144,
                objects: [
                    {name: "Sun", distance: 0.000016, luminosity: 1, temperature: 5778, mass: 1},
                    {name: "Proxima Centauri", distance: 4.24, luminosity: 0.0017, temperature: 3042, mass: 0.12},
                    {name: "Sirius A", distance: 8.66, luminosity: 25.4, temperature: 9940, mass: 2.02},
                    {name: "Vega", distance: 25, luminosity: 40, temperature: 9602, mass: 2.1},
                    {name: "Arcturus", distance: 36.7, luminosity: 170, temperature: 4286, mass: 1.08}
                ]
            },
            {
                name: "GIANTS",
                color: "#FF4500",  // Red-Orange
                startAngle: 144,
                endAngle: 216,
                objects: [
                    {name: "Betelgeuse", distance: 650, luminosity: 126000, temperature: 3500, mass: 20},
                    {name: "Rigel", distance: 860, luminosity: 120000, temperature: 11000, mass: 21},
                    {name: "Deneb", distance: 2616, luminosity: 196000, temperature: 8525, mass: 19},
                    {name: "Antares", distance: 600, luminosity: 75000, temperature: 3660, mass: 12},
                    {name: "Aldebaran", distance: 65.3, luminosity: 518, temperature: 3910, mass: 1.5}
                ]
            },
            {
                name: "NEBULAE",
                color: "#9370DB",  // Purple
                startAngle: 216,
                endAngle: 288,
                objects: [
                    {name: "Orion Nebula", distance: 1344, luminosity: 1000, temperature: 10000, mass: 2000},
                    {name: "Crab Nebula", distance: 6523, luminosity: 75000, temperature: 15000, mass: 4.6},
                    {name: "Eagle Nebula", distance: 7000, luminosity: 2000, temperature: 8000, mass: 12000},
                    {name: "Ring Nebula", distance: 2283, luminosity: 200, temperature: 100000, mass: 0.6},
                    {name: "Helix Nebula", distance: 650, luminosity: 1, temperature: 120000, mass: 1}
                ]
            },
            {
                name: "GALAXIES",
                color: "#4169E1",  // Royal Blue
                startAngle: 288,
                endAngle: 360,
                objects: [
                    {name: "LMC", distance: 163000, luminosity: 10000000000, temperature: 8000, mass: 10000000000},
                    {name: "SMC", distance: 200000, luminosity: 5000000000, temperature: 7000, mass: 7000000000},
                    {name: "Andromeda", distance: 2537000, luminosity: 260000000000, temperature: 6000, mass: 1500000000000},
                    {name: "Triangulum", distance: 3000000, luminosity: 40000000000, temperature: 6500, mass: 50000000000},
                    {name: "Whirlpool", distance: 23000000, luminosity: 70000000000, temperature: 6000, mass: 160000000000}
                ]
            },
            {
                name: "QUASARS",
                color: "#00BFFF",  // Deep Sky Blue (electric cosmic blue)
                startAngle: 0,
                endAngle: 72,
                objects: [
                    {name: "3C 273", distance: 2440000000, luminosity: 4000000000000000, temperature: 50000, mass: 886000000},
                    {name: "3C 454.3", distance: 4730000000, luminosity: 8000000000000000, temperature: 55000, mass: 1200000000},
                    {name: "PKS 2126", distance: 3260000000, luminosity: 5000000000000000, temperature: 52000, mass: 950000000}
                ]
            }
        ];
        
        // Setup
        const width = 900;
        const height = 900;
        const centerX = width / 2;
        const centerY = height / 2;
        const maxRadius = 320;
        
        // Scales - Fixed to match actual data ranges
        const distanceScale = d3.scaleLog()
            .domain([0.000015, 5000000000])
            .range([0, maxRadius])
            .clamp(true);
        
        const sizeScale = d3.scaleLog()
            .domain([0.001, 8000000000000000])
            .range([3, 25])
            .clamp(true);
        
        const temperatureScale = d3.scaleLinear()
            .domain([3000, 120000])
            .range([0.3, 1]);
        
        // Create SVG
        const svg = d3.select("#container")
            .append("svg")
            .attr("viewBox", [0, 0, width, height])
            .style("width", "100%")
            .style("height", "100%");
        
        const g = svg.append("g")
            .attr("transform", `translate(${centerX},${centerY})`);
        
        // Background circle
        g.append("circle")
            .attr("r", maxRadius + 40)
            .attr("fill", "#0a0a12")
            .attr("stroke", "#1a2332")
            .attr("stroke-width", 2);
        
        // Draw category sectors (pie slices)
        const arc = d3.arc()
            .innerRadius(0)
            .outerRadius(maxRadius + 20);
        
        categories.forEach(category => {
            const startAngle = (category.startAngle - 90) * Math.PI / 180;
            const endAngle = (category.endAngle - 90) * Math.PI / 180;
            
            // Draw colored sector background
            g.append("path")
                .attr("class", "category-sector")
                .attr("d", arc({
                    startAngle: startAngle,
                    endAngle: endAngle
                }))
                .attr("fill", category.color);
            
            // Draw sector boundaries
            g.append("line")
                .attr("class", "category-boundary")
                .attr("x1", 0)
                .attr("y1", 0)
                .attr("x2", (maxRadius + 20) * Math.cos(startAngle))
                .attr("y2", (maxRadius + 20) * Math.sin(startAngle));
            
            // Add category labels
            const midAngle = (startAngle + endAngle) / 2;
            const labelRadius = maxRadius + 35;
            
            g.append("text")
                .attr("class", "category-label")
                .attr("x", labelRadius * Math.cos(midAngle))
                .attr("y", labelRadius * Math.sin(midAngle))
                .attr("fill", category.color)
                .attr("transform", `rotate(${(category.startAngle + category.endAngle) / 2} ${labelRadius * Math.cos(midAngle)} ${labelRadius * Math.sin(midAngle)})`)
                .text(category.name);
        });
        
        // Draw distance rings
        const rings = [
            {dist: 0.00001, label: "", major: false},
            {dist: 0.001, label: "0.001 ly", major: false},
            {dist: 1, label: "1 light year", major: true},
            {dist: 100, label: "100 ly", major: true},
            {dist: 10000, label: "10,000 ly", major: true},
            {dist: 1000000, label: "1 Million ly", major: true},
            {dist: 100000000, label: "100M ly", major: false},
            {dist: 10000000000, label: "10 Billion ly", major: true}
        ];
        
        rings.forEach(ring => {
            const radius = distanceScale(ring.dist);
            
            g.append("circle")
                .attr("class", ring.major ? "distance-ring-major" : "distance-ring")
                .attr("r", radius)
                .attr("fill", "none");
            
            if (ring.label && ring.major) {
                // Add label with background
                const labelBg = g.append("rect")
                    .attr("x", -40)
                    .attr("y", -radius - 14)
                    .attr("width", 80)
                    .attr("height", 18)
                    .attr("fill", "#0a0a12")
                    .attr("stroke", "#3a5f8f")
                    .attr("stroke-width", 1)
                    .attr("rx", 9);
                
                g.append("text")
                    .attr("class", "distance-label")
                    .attr("x", 0)
                    .attr("y", -radius)
                    .text(ring.label);
            }
        });
        
        // Create tooltip
        const tooltip = d3.select("body")
            .append("div")
            .attr("class", "tooltip");
        
        // Plot objects within their category sectors
        categories.forEach(category => {
            const angleRange = category.endAngle - category.startAngle;
            const angleStep = angleRange / (category.objects.length + 1);
            
            category.objects.forEach((obj, i) => {
                // Distribute objects evenly within their sector
                const angle = (category.startAngle + angleStep * (i + 1) - 90) * Math.PI / 180;
                const radius = distanceScale(obj.distance);
                const x = radius * Math.cos(angle);
                const y = radius * Math.sin(angle);
                
                // Draw object with proper category color
                g.append("circle")
                    .attr("class", "celestial-object")
                    .attr("cx", x)
                    .attr("cy", y)
                    .attr("r", sizeScale(obj.luminosity))
                    .attr("fill", category.color)
                    .attr("stroke", "#ffffff")
                    .attr("stroke-width", 1)
                    .style("opacity", temperatureScale(obj.temperature))
                    .on("mouseover", function(event) {
                        d3.select(this)
                            .transition()
                            .duration(200)
                            .attr("stroke-width", 3);
                        
                        tooltip
                            .style("border-color", category.color)
                            .html(`
                                <h3 style="color: ${category.color}">${obj.name}</h3>
                                <div class="tooltip-stat">
                                    <span class="tooltip-label">Category</span>
                                    <span class="tooltip-value">${category.name}</span>
                                </div>
                                <div class="tooltip-stat">
                                    <span class="tooltip-label">Distance</span>
                                    <span class="tooltip-value">${
                                        obj.distance < 1 ? obj.distance.toFixed(6) + " ly" :
                                        obj.distance < 1000 ? obj.distance.toFixed(1) + " ly" :
                                        obj.distance < 1000000 ? (obj.distance/1000).toFixed(0) + "K ly" :
                                        obj.distance < 1000000000 ? (obj.distance/1000000).toFixed(1) + "M ly" :
                                        (obj.distance/1000000000).toFixed(1) + "B ly"
                                    }</span>
                                </div>
                                <div class="tooltip-stat">
                                    <span class="tooltip-label">Luminosity</span>
                                    <span class="tooltip-value">${
                                        obj.luminosity < 1 ? obj.luminosity.toFixed(4) :
                                        obj.luminosity > 1000000 ? obj.luminosity.toExponential(1) :
                                        obj.luminosity.toLocaleString()
                                    } L☉</span>
                                </div>
                                <div class="tooltip-stat">
                                    <span class="tooltip-label">Temperature</span>
                                    <span class="tooltip-value">${obj.temperature.toLocaleString()}K</span>
                                </div>
                            `)
                            .style("left", (event.pageX + 15) + "px")
                            .style("top", (event.pageY - 10) + "px")
                            .style("opacity", 1);
                    })
                    .on("mouseout", function() {
                        d3.select(this)
                            .transition()
                            .duration(200)
                            .attr("stroke-width", 1);
                        
                        tooltip.style("opacity", 0);
                    });
                
                // Add labels for key objects
                const keyObjects = ["Sun", "Proxima Centauri", "Betelgeuse", "Orion Nebula", "Andromeda", "3C 273"];
                if (keyObjects.includes(obj.name)) {
                    const labelRadius = radius + sizeScale(obj.luminosity) + 12;
                    const labelX = labelRadius * Math.cos(angle);
                    const labelY = labelRadius * Math.sin(angle);
                    
                    g.append("text")
                        .attr("class", "object-label")
                        .attr("x", labelX)
                        .attr("y", labelY)
                        .attr("fill", category.color)
                        .style("font-weight", "700")
                        .style("text-shadow", "0 0 4px #000000, 0 0 8px #000000")
                        .text(obj.name);
                }
            });
        });
        
        // Earth at center
        g.append("circle")
            .attr("class", "earth-center")
            .attr("r", 8);
        
        g.append("text")
            .attr("class", "earth-label")
            .attr("x", 0)
            .attr("y", -18)
            .text("EARTH");
        
        // Title
        svg.append("text")
            .attr("class", "chart-title")
            .attr("x", centerX)
            .attr("y", 40)
            .text("Cosmic Categories");
        
        svg.append("text")
            .attr("class", "chart-subtitle")
            .attr("x", centerX)
            .attr("y", 60)
            .text("Multi-Dimensional Encoding of Celestial Objects");
        
        // Legend for size (luminosity)
        const sizeLegend = svg.append("g")
            .attr("class", "legend-group")
            .attr("transform", `translate(50, ${height - 100})`);
        
        sizeLegend.append("text")
            .attr("class", "legend-title")
            .attr("x", 0)
            .attr("y", -10)
            .text("Size = Luminosity");
        
        const lumValues = [
            {lum: 1, label: "Dim", x: 20},
            {lum: 100000, label: "Bright", x: 80}, 
            {lum: 1000000000000000, label: "Super", x: 150}
        ];
        
        lumValues.forEach(item => {
            const radius = sizeScale(item.lum);
            
            sizeLegend.append("circle")
                .attr("cx", item.x)
                .attr("cy", 15)
                .attr("r", radius)
                .attr("fill", "none")
                .attr("stroke", "#6688aa")
                .attr("stroke-width", 1);
            
            sizeLegend.append("text")
                .attr("class", "legend-text")
                .attr("x", item.x)
                .attr("y", 35)
                .attr("text-anchor", "middle")
                .style("fill", "#ffffff")
                .style("font-size", "10px")
                .style("background", "transparent")
                .style("user-select", "none")
                .text(item.label);
        });
        
        // Legend for opacity (temperature)
        const tempLegend = svg.append("g")
            .attr("class", "legend-group")
            .attr("transform", `translate(${width - 200}, ${height - 100})`);
        
        tempLegend.append("text")
            .attr("class", "legend-title")
            .attr("x", 0)
            .attr("y", -10)
            .text("Opacity = Temperature");
        
        ["Cool (3000K)", "Warm (20000K)", "Hot (100000K)"].forEach((label, i) => {
            const x = i * 60;
            
            tempLegend.append("circle")
                .attr("cx", x + 8)
                .attr("cy", 10)
                .attr("r", 6)
                .attr("fill", "#6688aa")
                .style("opacity", 0.3 + i * 0.35);
            
            tempLegend.append("text")
                .attr("class", "legend-text")
                .attr("x", x + 8)
                .attr("y", 30)
                .attr("text-anchor", "middle")
                .style("font-size", "10px")
                .text(label.split(" ")[0]);
        });
        
    </script>
</body>
</html>